import{c as tt,s as at,u as et,h as G,r as U,a as ot,d as st,m as nt,b as $,e as it,j as s,f as M,g as L,i as S,k as H,l as B,n as j,P as rt,o as N,B as K,p as ct,q as V,t as z,v as lt,w as I,T as E,M as dt,L as pt,C as ut,D as gt,A as ft}from"./index-9b855403.js";import{u as vt,a as xt,b as yt,G as _,S as bt}from"./useToken-3d62f8e1.js";const mt=tt(),Ct=at("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,a)=>a.root});function ht(t){return et({props:t,name:"MuiStack",defaultTheme:mt})}function Pt(t,a){const e=$.Children.toArray(t).filter(Boolean);return e.reduce((o,n,r)=>(o.push(n),r<e.length-1&&o.push($.cloneElement(a,{key:`separator-${r}`})),o),[])}const $t=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],jt=({ownerState:t,theme:a})=>{let e={display:"flex",flexDirection:"column",...G({theme:a},U({values:t.direction,breakpoints:a.breakpoints.values}),o=>({flexDirection:o}))};if(t.spacing){const o=ot(a),n=Object.keys(a.breakpoints.values).reduce((i,l)=>((typeof t.spacing=="object"&&t.spacing[l]!=null||typeof t.direction=="object"&&t.direction[l]!=null)&&(i[l]=!0),i),{}),r=U({values:t.direction,base:n}),p=U({values:t.spacing,base:n});typeof r=="object"&&Object.keys(r).forEach((i,l,m)=>{if(!r[i]){const v=l>0?r[m[l-1]]:"column";r[i]=v}}),e=st(e,G({theme:a},p,(i,l)=>t.useFlexGap?{gap:H(o,i)}:{"& > :not(style) + :not(style)":{margin:0,[`margin${$t(l?r[l]:t.direction)}`]:H(o,i)}}))}return e=nt(a.breakpoints,e),e};function kt(t={}){const{createStyledComponent:a=Ct,useThemeProps:e=ht,componentName:o="MuiStack"}=t,n=()=>L({root:["root"]},i=>S(o,i),{}),r=a(jt);return $.forwardRef(function(i,l){const m=e(i),k=it(m),{component:v="div",direction:f="column",spacing:u=0,divider:P,children:C,className:x,useFlexGap:A=!1,...b}=k,R={direction:f,spacing:u,useFlexGap:A},h=n();return s.jsx(r,{as:v,ownerState:R,ref:l,className:M(h.root,x),...b,children:P?Pt(C,P):C})})}function Rt(t){return S("MuiCard",t)}B("MuiCard",["root"]);const At=t=>{const{classes:a}=t;return L({root:["root"]},Rt,a)},Mt=j(rt,{name:"MuiCard",slot:"Root",overridesResolver:(t,a)=>a.root})(()=>({overflow:"hidden"})),zt=$.forwardRef(function(a,e){const o=N({props:a,name:"MuiCard"}),{className:n,raised:r=!1,...p}=o,c={...o,raised:r},i=At(c);return s.jsx(Mt,{className:M(i.root,n),elevation:r?8:void 0,ref:e,ownerState:c,...p})}),It=zt;function Lt(t){return S("MuiCardActionArea",t)}const St=B("MuiCardActionArea",["root","focusVisible","focusHighlight"]),D=St,Nt=t=>{const{classes:a}=t;return L({root:["root"],focusHighlight:["focusHighlight"]},Lt,a)},Ot=j(K,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(t,a)=>a.root})(({theme:t})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${D.focusHighlight}`]:{opacity:(t.vars||t).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${D.focusVisible} .${D.focusHighlight}`]:{opacity:(t.vars||t).palette.action.focusOpacity}})),Tt=j("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(t,a)=>a.focusHighlight})(({theme:t})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:t.transitions.create("opacity",{duration:t.transitions.duration.short})})),Bt=$.forwardRef(function(a,e){const o=N({props:a,name:"MuiCardActionArea"}),{children:n,className:r,focusVisibleClassName:p,...c}=o,i=o,l=Nt(i);return s.jsxs(Ot,{className:M(l.root,r),focusVisibleClassName:M(p,l.focusVisible),ref:e,ownerState:i,...c,children:[n,s.jsx(Tt,{className:l.focusHighlight,ownerState:i})]})}),Vt=Bt;function wt(t){return S("MuiPagination",t)}B("MuiPagination",["root","ul","outlined","text"]);function Ft(t={}){const{boundaryCount:a=1,componentName:e="usePagination",count:o=1,defaultPage:n=1,disabled:r=!1,hideNextButton:p=!1,hidePrevButton:c=!1,onChange:i,page:l,showFirstButton:m=!1,showLastButton:k=!1,siblingCount:v=1,...f}=t,[u,P]=ct({controlled:l,default:n,name:e,state:"page"}),C=(d,g)=>{l||P(g),i&&i(d,g)},x=(d,g)=>{const F=g-d+1;return Array.from({length:F},(va,Y)=>d+Y)},A=x(1,Math.min(a,o)),b=x(Math.max(o-a+1,a+1),o),R=Math.max(Math.min(u-v,o-a-v*2-1),a+2),h=Math.min(Math.max(u+v,a+v*2+2),b.length>0?b[0]-2:o-1),w=[...m?["first"]:[],...c?[]:["previous"],...A,...R>a+2?["start-ellipsis"]:a+1<o-a?[a+1]:[],...x(R,h),...h<o-a-1?["end-ellipsis"]:o-a>a?[o-a]:[],...b,...p?[]:["next"],...k?["last"]:[]],O=d=>{switch(d){case"first":return 1;case"previous":return u-1;case"next":return u+1;case"last":return o;default:return null}};return{items:w.map(d=>typeof d=="number"?{onClick:g=>{C(g,d)},type:"page",page:d,selected:d===u,disabled:r,"aria-current":d===u?"true":void 0}:{onClick:g=>{C(g,O(d))},type:d,page:O(d),selected:!1,disabled:r||d.indexOf("ellipsis")===-1&&(d==="next"||d==="last"?u>=o:u<=1)}),...f}}function Ut(t){return S("MuiPaginationItem",t)}const Dt=B("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),y=Dt,W=V(s.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),q=V(s.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Q=V(s.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Z=V(s.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),X=(t,a)=>{const{ownerState:e}=t;return[a.root,a[e.variant],a[`size${I(e.size)}`],e.variant==="text"&&a[`text${I(e.color)}`],e.variant==="outlined"&&a[`outlined${I(e.color)}`],e.shape==="rounded"&&a.rounded,e.type==="page"&&a.page,(e.type==="start-ellipsis"||e.type==="end-ellipsis")&&a.ellipsis,(e.type==="previous"||e.type==="next")&&a.previousNext,(e.type==="first"||e.type==="last")&&a.firstLast]},Et=t=>{const{classes:a,color:e,disabled:o,selected:n,size:r,shape:p,type:c,variant:i}=t,l={root:["root",`size${I(r)}`,i,p,e!=="standard"&&`${i}${I(e)}`,o&&"disabled",n&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[c]],icon:["icon"]};return L(l,Ut,a)},_t=j("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:X})(({theme:t,ownerState:a})=>({...t.typography.body2,borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto",[`&.${y.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},...a.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},...a.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)}})),Gt=j(K,{name:"MuiPaginationItem",slot:"Root",overridesResolver:X})(({theme:t,ownerState:a})=>({...t.typography.body2,borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,[`&.${y.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${y.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${y.selected}`]:{backgroundColor:(t.vars||t).palette.action.selected,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selected} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:z(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${y.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selected} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:z(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},[`&.${y.disabled}`]:{opacity:1,color:(t.vars||t).palette.action.disabled,backgroundColor:(t.vars||t).palette.action.selected}},...a.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},...a.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)},...a.shape==="rounded"&&{borderRadius:(t.vars||t).shape.borderRadius}}),({theme:t,ownerState:a})=>({...a.variant==="text"&&{[`&.${y.selected}`]:{...a.color!=="standard"&&{color:(t.vars||t).palette[a.color].contrastText,backgroundColor:(t.vars||t).palette[a.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[a.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[a.color].main}},[`&.${y.focusVisible}`]:{backgroundColor:(t.vars||t).palette[a.color].dark}},[`&.${y.disabled}`]:{color:(t.vars||t).palette.action.disabled}}},...a.variant==="outlined"&&{border:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${y.selected}`]:{...a.color!=="standard"&&{color:(t.vars||t).palette[a.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / 0.5)`:z(t.palette[a.color].main,.5)}`,backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / ${t.vars.palette.action.activatedOpacity})`:z(t.palette[a.color].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:z(t.palette[a.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${y.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[a.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:z(t.palette[a.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}},[`&.${y.disabled}`]:{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}}}})),Ht=j("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(t,a)=>a.icon})(({theme:t,ownerState:a})=>({fontSize:t.typography.pxToRem(20),margin:"0 -8px",...a.size==="small"&&{fontSize:t.typography.pxToRem(18)},...a.size==="large"&&{fontSize:t.typography.pxToRem(22)}})),Wt=$.forwardRef(function(a,e){const o=N({props:a,name:"MuiPaginationItem"}),{className:n,color:r="standard",component:p,components:c={},disabled:i=!1,page:l,selected:m=!1,shape:k="circular",size:v="medium",slots:f={},type:u="page",variant:P="text",...C}=o,x={...o,color:r,disabled:i,selected:m,shape:k,size:v,type:u,variant:P},A=lt(),b=Et(x),h=(A.direction==="rtl"?{previous:f.next||c.next||Z,next:f.previous||c.previous||Q,last:f.first||c.first||W,first:f.last||c.last||q}:{previous:f.previous||c.previous||Q,next:f.next||c.next||Z,first:f.first||c.first||W,last:f.last||c.last||q})[u];return u==="start-ellipsis"||u==="end-ellipsis"?s.jsx(_t,{ref:e,ownerState:x,className:M(b.root,n),children:"â€¦"}):s.jsxs(Gt,{ref:e,ownerState:x,component:p,disabled:i,className:M(b.root,n),...C,children:[u==="page"&&l,h?s.jsx(Ht,{as:h,ownerState:x,className:b.icon}):null]})}),qt=Wt,Qt=t=>{const{classes:a,variant:e}=t;return L({root:["root",e],ul:["ul"]},wt,a)},Zt=j("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(t,a)=>{const{ownerState:e}=t;return[a.root,a[e.variant]]}})({}),Jt=j("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(t,a)=>a.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function Kt(t,a,e){return t==="page"?`${e?"":"Go to "}page ${a}`:`Go to ${t} page`}const Xt=$.forwardRef(function(a,e){const o=N({props:a,name:"MuiPagination"}),{boundaryCount:n=1,className:r,color:p="standard",count:c=1,defaultPage:i=1,disabled:l=!1,getItemAriaLabel:m=Kt,hideNextButton:k=!1,hidePrevButton:v=!1,onChange:f,page:u,renderItem:P=g=>s.jsx(qt,{...g}),shape:C="circular",showFirstButton:x=!1,showLastButton:A=!1,siblingCount:b=1,size:R="medium",variant:h="text",...w}=o,{items:O}=Ft({...o,componentName:"Pagination"}),T={...o,boundaryCount:n,color:p,count:c,defaultPage:i,disabled:l,getItemAriaLabel:m,hideNextButton:k,hidePrevButton:v,renderItem:P,shape:C,showFirstButton:x,showLastButton:A,siblingCount:b,size:R,variant:h},d=Qt(T);return s.jsx(Zt,{"aria-label":"pagination navigation",className:M(d.root,r),ownerState:T,ref:e,...w,children:s.jsx(Jt,{className:d.ul,ownerState:T,children:O.map((g,F)=>s.jsx("li",{children:P({...g,color:p,"aria-label":m(g.type,g.page,g.selected),shape:C,size:R,variant:h})},F))})})}),Yt=Xt,ta=kt({createStyledComponent:j("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,a)=>a.root}),useThemeProps:t=>N({props:t,name:"MuiStack"})}),aa=ta,ea="/api/",oa=20,sa=async(t,a)=>{if(!a)throw new Error("Failed to validate token");const e=await fetch(ea+t,{method:"GET",headers:{Authorization:a.token,"Content-Type":"application/json"}});if(!e.ok){const n=await e.json();throw new Error((n==null?void 0:n.message)||e.statusText)}return await e.json()},na={revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1};function ia(t){const{accessToken:a}=vt(),e=$.useRef(1),o=$.useRef(1),{data:n,error:r,isLoading:p}=xt(a?t:null,c=>sa(c,a),na);return n!=null&&n.pagination&&(o.current!==n.pagination.total_pages&&(o.current=n.pagination.total_pages),e.current!==n.pagination.current_page&&(e.current=n.pagination.current_page)),{petListData:n==null?void 0:n.pets,error:r,isLoading:p,currentPage:e.current,totalPages:o.current,itemsPerPage:oa}}const ra={textAlign:"center",marginBottom:"1rem",marginTop:"2rem"},ca={textAlign:"center",marginBottom:"20px"};function la(t){const a=t.petType.slice(0,1).toUpperCase()+t.petType.slice(1);return s.jsxs(s.Fragment,{children:[s.jsxs(E,{sx:ra,variant:"h2",children:[a,"s within a 50 mile radius."]}),s.jsxs(E,{sx:ca,variant:"subtitle1",children:["Adoptable ",t.petType,"s by Zip Code: ",t.zipCode]})]})}function da(t){return s.jsx(aa,{spacing:2,direction:"row",justifyContent:"center",alignItems:"center",children:s.jsx(Yt,{count:t.totalPages,page:t.currentPage,color:"primary",showFirstButton:!0,onChange:t.onPageChange,disabled:t.isLoading,size:"large"})})}const J={fontSize:"200px",color:"primary"},pa={marginTop:"5px",marginBottom:"16px",color:"primary"};function ua(t){var n;const{mutate:a}=yt();function e(){a(`/api/pets/${t.pet.id}`,t.pet)}const o=(n=t.pet.primary_photo_cropped)!=null&&n.medium?t.pet.primary_photo_cropped.medium:null;return s.jsx(_,{item:!0,children:s.jsx(dt,{component:pt,style:{textDecoration:"none"},to:`/pets/${t.pet.id}`,children:s.jsx(Vt,{onClick:e,children:s.jsxs(It,{sx:{maxWidth:"200px"},children:[o?s.jsx("img",{src:o,width:200,height:200,alt:"Picture of pet"}):t.pet.type=="Cat"?s.jsx(ut,{sx:J}):s.jsx(gt,{sx:J}),s.jsxs(E,{sx:pa,children:[s.jsx("b",{children:t.pet.name}),s.jsx("br",{}),s.jsx("br",{}),s.jsx("b",{children:"Gender:"})," ",t.pet.gender,s.jsx("br",{}),s.jsx("b",{children:"Age:"})," ",t.pet.age]})]})})})},t.pet.id)}function ga(t){const a=new Array(t);for(let e=0;e<a.length;e++)a[e]=s.jsx(_,{item:!0,xs:!0,children:s.jsx(bt,{variant:"rectangular",animation:"wave",width:200,height:250})},"grid-item-key-"+e);return a}function fa(t){return s.jsx(_,{container:!0,spacing:2,justifyContent:"center",children:!t.petData||t.isLoading?ga(t.itemsPerPage):t.petData.map((a,e)=>s.jsx(ua,{pet:a},"pet-id-"+e))})}function ba(t){const{petListData:a,error:e,isLoading:o,currentPage:n,totalPages:r,itemsPerPage:p}=ia(t.searchQueryURL),c=t.searchParams.get("type"),i=t.searchParams.get("location");return e?s.jsxs(ft,{severity:"error",children:["Failed to retrieve ",c," data..."]}):s.jsxs(s.Fragment,{children:[s.jsx(la,{petType:c,zipCode:i}),s.jsx(fa,{petData:a,isLoading:o,itemsPerPage:p}),s.jsx(da,{currentPage:n,totalPages:r,isLoading:o,onPageChange:t.onPageChange})]})}export{ba as default};
