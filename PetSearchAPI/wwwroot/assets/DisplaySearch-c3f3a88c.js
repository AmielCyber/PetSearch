import{c as at,s as ot,u as st,_ as g,h as G,r as D,a as nt,d as it,m as rt,b as $,e as ct,f as I,j as s,g as z,i as T,k as w,l as H,n as V,o as k,P as lt,p as _,B as X,q as dt,t as U,v as L,w as pt,x as O,T as F,M as ut,L as gt,C as ft,D as vt,A as xt}from"./index-71b72adb.js";import{u as yt,a as bt,b as mt,G as W,S as ht}from"./useToken-e86a2915.js";const Ct=["component","direction","spacing","divider","children","className","useFlexGap"],Pt=at(),$t=ot("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function kt(t){return st({props:t,name:"MuiStack",defaultTheme:Pt})}function jt(t,e){const a=$.Children.toArray(t).filter(Boolean);return a.reduce((o,n,i)=>(o.push(n),i<a.length-1&&o.push($.cloneElement(e,{key:`separator-${i}`})),o),[])}const Rt=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],At=({ownerState:t,theme:e})=>{let a=g({display:"flex",flexDirection:"column"},G({theme:e},D({values:t.direction,breakpoints:e.breakpoints.values}),o=>({flexDirection:o})));if(t.spacing){const o=nt(e),n=Object.keys(e.breakpoints.values).reduce((r,l)=>((typeof t.spacing=="object"&&t.spacing[l]!=null||typeof t.direction=="object"&&t.direction[l]!=null)&&(r[l]=!0),r),{}),i=D({values:t.direction,base:n}),d=D({values:t.spacing,base:n});typeof i=="object"&&Object.keys(i).forEach((r,l,m)=>{if(!i[r]){const v=l>0?i[m[l-1]]:"column";i[r]=v}}),a=it(a,G({theme:e},d,(r,l)=>t.useFlexGap?{gap:H(o,r)}:{"& > :not(style) + :not(style)":{margin:0,[`margin${Rt(l?i[l]:t.direction)}`]:H(o,r)}}))}return a=rt(e.breakpoints,a),a};function Nt(t={}){const{createStyledComponent:e=$t,useThemeProps:a=kt,componentName:o="MuiStack"}=t,n=()=>T({root:["root"]},r=>w(o,r),{}),i=e(At);return $.forwardRef(function(r,l){const m=a(r),h=ct(m),{component:v="div",direction:f="column",spacing:u=0,divider:j,children:C,className:x,useFlexGap:R=!1}=h,y=I(h,Ct),M={direction:f,spacing:u,useFlexGap:R},P=n();return s.jsx(i,g({as:v,ownerState:M,ref:l,className:z(P.root,x)},y,{children:j?jt(C,j):C}))})}function Mt(t){return w("MuiCard",t)}V("MuiCard",["root"]);const zt=["className","raised"],Lt=t=>{const{classes:e}=t;return T({root:["root"]},Mt,e)},It=k(lt,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),St=$.forwardRef(function(e,a){const o=_({props:e,name:"MuiCard"}),{className:n,raised:i=!1}=o,d=I(o,zt),c=g({},o,{raised:i}),r=Lt(c);return s.jsx(It,g({className:z(r.root,n),elevation:i?8:void 0,ref:a,ownerState:c},d))}),Bt=St;function Ot(t){return w("MuiCardActionArea",t)}const Tt=V("MuiCardActionArea",["root","focusVisible","focusHighlight"]),E=Tt,wt=["children","className","focusVisibleClassName"],_t=t=>{const{classes:e}=t;return T({root:["root"],focusHighlight:["focusHighlight"]},Ot,e)},Ft=k(X,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${E.focusHighlight}`]:{opacity:(t.vars||t).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${E.focusVisible} .${E.focusHighlight}`]:{opacity:(t.vars||t).palette.action.focusOpacity}})),Vt=k("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(t,e)=>e.focusHighlight})(({theme:t})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:t.transitions.create("opacity",{duration:t.transitions.duration.short})})),Ut=$.forwardRef(function(e,a){const o=_({props:e,name:"MuiCardActionArea"}),{children:n,className:i,focusVisibleClassName:d}=o,c=I(o,wt),r=o,l=_t(r);return s.jsxs(Ft,g({className:z(l.root,i),focusVisibleClassName:z(d,l.focusVisible),ref:a,ownerState:r},c,{children:[n,s.jsx(Vt,{className:l.focusHighlight,ownerState:r})]}))}),Dt=Ut;function Et(t){return w("MuiPagination",t)}V("MuiPagination",["root","ul","outlined","text"]);const Wt=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function Gt(t={}){const{boundaryCount:e=1,componentName:a="usePagination",count:o=1,defaultPage:n=1,disabled:i=!1,hideNextButton:d=!1,hidePrevButton:c=!1,onChange:r,page:l,showFirstButton:m=!1,showLastButton:h=!1,siblingCount:v=1}=t,f=I(t,Wt),[u,j]=dt({controlled:l,default:n,name:a,state:"page"}),C=(p,N)=>{l||j(N),r&&r(p,N)},x=(p,N)=>{const tt=N-p+1;return Array.from({length:tt},(Ae,et)=>p+et)},R=x(1,Math.min(e,o)),y=x(Math.max(o-e+1,e+1),o),M=Math.max(Math.min(u-v,o-e-v*2-1),e+2),P=Math.min(Math.max(u+v,e+v*2+2),y.length>0?y[0]-2:o-1),S=[...m?["first"]:[],...c?[]:["previous"],...R,...M>e+2?["start-ellipsis"]:e+1<o-e?[e+1]:[],...x(M,P),...P<o-e-1?["end-ellipsis"]:o-e>e?[o-e]:[],...y,...d?[]:["next"],...h?["last"]:[]],B=p=>{switch(p){case"first":return 1;case"previous":return u-1;case"next":return u+1;case"last":return o;default:return null}},A=S.map(p=>typeof p=="number"?{onClick:N=>{C(N,p)},type:"page",page:p,selected:p===u,disabled:i,"aria-current":p===u?"true":void 0}:{onClick:N=>{C(N,B(p))},type:p,page:B(p),selected:!1,disabled:i||p.indexOf("ellipsis")===-1&&(p==="next"||p==="last"?u>=o:u<=1)});return g({items:A},f)}function Ht(t){return w("MuiPaginationItem",t)}const qt=V("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),b=qt,q=U(s.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Q=U(s.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Z=U(s.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),J=U(s.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Qt=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Y=(t,e)=>{const{ownerState:a}=t;return[e.root,e[a.variant],e[`size${O(a.size)}`],a.variant==="text"&&e[`text${O(a.color)}`],a.variant==="outlined"&&e[`outlined${O(a.color)}`],a.shape==="rounded"&&e.rounded,a.type==="page"&&e.page,(a.type==="start-ellipsis"||a.type==="end-ellipsis")&&e.ellipsis,(a.type==="previous"||a.type==="next")&&e.previousNext,(a.type==="first"||a.type==="last")&&e.firstLast]},Zt=t=>{const{classes:e,color:a,disabled:o,selected:n,size:i,shape:d,type:c,variant:r}=t,l={root:["root",`size${O(i)}`,r,d,a!=="standard"&&`${r}${O(a)}`,o&&"disabled",n&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[c]],icon:["icon"]};return T(l,Ht,e)},Jt=k("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Y})(({theme:t,ownerState:e})=>g({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto",[`&.${b.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},e.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)})),Kt=k(X,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Y})(({theme:t,ownerState:e})=>g({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,[`&.${b.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${b.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${b.selected}`]:{backgroundColor:(t.vars||t).palette.action.selected,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selected} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:L(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${b.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selected} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:L(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},[`&.${b.disabled}`]:{opacity:1,color:(t.vars||t).palette.action.disabled,backgroundColor:(t.vars||t).palette.action.selected}}},e.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},e.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)},e.shape==="rounded"&&{borderRadius:(t.vars||t).shape.borderRadius}),({theme:t,ownerState:e})=>g({},e.variant==="text"&&{[`&.${b.selected}`]:g({},e.color!=="standard"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}},[`&.${b.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}},{[`&.${b.disabled}`]:{color:(t.vars||t).palette.action.disabled}})},e.variant==="outlined"&&{border:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${b.selected}`]:g({},e.color!=="standard"&&{color:(t.vars||t).palette[e.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:L(t.palette[e.color].main,.5)}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.activatedOpacity})`:L(t.palette[e.color].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:L(t.palette[e.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${b.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:L(t.palette[e.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}},{[`&.${b.disabled}`]:{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}})})),Xt=k("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(t,e)=>e.icon})(({theme:t,ownerState:e})=>g({fontSize:t.typography.pxToRem(20),margin:"0 -8px"},e.size==="small"&&{fontSize:t.typography.pxToRem(18)},e.size==="large"&&{fontSize:t.typography.pxToRem(22)})),Yt=$.forwardRef(function(e,a){const o=_({props:e,name:"MuiPaginationItem"}),{className:n,color:i="standard",component:d,components:c={},disabled:r=!1,page:l,selected:m=!1,shape:h="circular",size:v="medium",slots:f={},type:u="page",variant:j="text"}=o,C=I(o,Qt),x=g({},o,{color:i,disabled:r,selected:m,shape:h,size:v,type:u,variant:j}),R=pt(),y=Zt(x),P=(R.direction==="rtl"?{previous:f.next||c.next||J,next:f.previous||c.previous||Z,last:f.first||c.first||q,first:f.last||c.last||Q}:{previous:f.previous||c.previous||Z,next:f.next||c.next||J,first:f.first||c.first||q,last:f.last||c.last||Q})[u];return u==="start-ellipsis"||u==="end-ellipsis"?s.jsx(Jt,{ref:a,ownerState:x,className:z(y.root,n),children:"…"}):s.jsxs(Kt,g({ref:a,ownerState:x,component:d,disabled:r,className:z(y.root,n)},C,{children:[u==="page"&&l,P?s.jsx(Xt,{as:P,ownerState:x,className:y.icon}):null]}))}),te=Yt,ee=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],ae=t=>{const{classes:e,variant:a}=t;return T({root:["root",a],ul:["ul"]},Et,e)},oe=k("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:a}=t;return[e.root,e[a.variant]]}})({}),se=k("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(t,e)=>e.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function ne(t,e,a){return t==="page"?`${a?"":"Go to "}page ${e}`:`Go to ${t} page`}const ie=$.forwardRef(function(e,a){const o=_({props:e,name:"MuiPagination"}),{boundaryCount:n=1,className:i,color:d="standard",count:c=1,defaultPage:r=1,disabled:l=!1,getItemAriaLabel:m=ne,hideNextButton:h=!1,hidePrevButton:v=!1,renderItem:f=A=>s.jsx(te,g({},A)),shape:u="circular",showFirstButton:j=!1,showLastButton:C=!1,siblingCount:x=1,size:R="medium",variant:y="text"}=o,M=I(o,ee),{items:P}=Gt(g({},o,{componentName:"Pagination"})),S=g({},o,{boundaryCount:n,color:d,count:c,defaultPage:r,disabled:l,getItemAriaLabel:m,hideNextButton:h,hidePrevButton:v,renderItem:f,shape:u,showFirstButton:j,showLastButton:C,siblingCount:x,size:R,variant:y}),B=ae(S);return s.jsx(oe,g({"aria-label":"pagination navigation",className:z(B.root,i),ownerState:S,ref:a},M,{children:s.jsx(se,{className:B.ul,ownerState:S,children:P.map((A,p)=>s.jsx("li",{children:f(g({},A,{color:d,"aria-label":m(A.type,A.page,A.selected),shape:u,size:R,variant:y}))},p))})}))}),re=ie,ce=Nt({createStyledComponent:k("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>_({props:t,name:"MuiStack"})}),le=ce,de="/api/",pe=20,ue=async(t,e)=>{if(!e)throw new Error("Failed to validate token");const a=await fetch(de+t,{method:"GET",headers:{Authorization:e.token,"Content-Type":"application/json"}});if(!a.ok){const n=await a.json();throw new Error((n==null?void 0:n.message)||a.statusText)}return await a.json()},ge={revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1};function fe(t){const{accessToken:e}=yt(),a=$.useRef(1),o=$.useRef(1),{data:n,error:i,isLoading:d}=bt(e?t:null,c=>ue(c,e),ge);return n!=null&&n.pagination&&(o.current!==n.pagination.total_pages&&(o.current=n.pagination.total_pages),a.current!==n.pagination.current_page&&(a.current=n.pagination.current_page)),{petListData:n==null?void 0:n.pets,error:i,isLoading:d,currentPage:a.current,totalPages:o.current,itemsPerPage:pe}}const ve={textAlign:"center",marginBottom:"1rem",marginTop:"2rem"},xe={textAlign:"center",marginBottom:"20px"};function ye(t){return s.jsxs(s.Fragment,{children:[s.jsxs(F,{sx:ve,variant:"h2",children:["Adoptable ",t.petType,"s within 50 mile",t.petType.length>1?"s":"","."]}),s.jsxs(F,{sx:xe,variant:"subtitle1",children:["Zip Code: ",t.zipCode]})]})}const be={paddingTop:"2rem"};function me(t){return s.jsx(le,{spacing:2,direction:"row",justifyContent:"center",alignItems:"center",children:s.jsx(re,{count:t.totalPages,page:t.currentPage,color:"primary",showFirstButton:!0,onChange:t.onPageChange,disabled:t.isLoading,size:"large",sx:be})})}const he="_imageContainer_pbgyy_1",Ce={imageContainer:he},K={fontSize:"300px",color:"primary"},Pe={marginBottom:"16px",textAlign:"center"},$e={marginBottom:"6px",textAlign:"center"};function ke(t){var d;const{mutate:e}=mt();async function a(){await e(`pets/${t.pet.id}`,t.pet)}const o=((d=t.pet.primary_photo_cropped)==null?void 0:d.small)??null,n=t.pet.distance?t.pet.distance.toFixed(1):"0";let i="";return n!=="0"&&(i=`${n} miles away`),s.jsx(W,{item:!0,children:s.jsx(ut,{component:gt,style:{textDecoration:"none"},to:`/pets/${t.pet.id}`,state:{fromSearch:!0},preventScrollReset:!1,children:s.jsx(Dt,{onClick:a,children:s.jsxs(Bt,{sx:{maxWidth:"300px"},elevation:3,children:[o?s.jsx("div",{className:Ce.imageContainer,children:s.jsx("img",{src:o,alt:t.pet.name,loading:"lazy",decoding:"async"})}):t.pet.type=="Cat"?s.jsx(ft,{sx:K}):s.jsx(vt,{sx:K}),s.jsx(F,{variant:"h6",noWrap:!0,sx:$e,children:t.pet.name}),s.jsxs(F,{sx:Pe,children:[t.pet.age," ",t.pet.gender,s.jsx("br",{}),i]})]})})})},t.pet.id)}function je(t){const e=new Array(t);for(let a=0;a<e.length;a++)e[a]=s.jsx(W,{item:!0,children:s.jsx(ht,{variant:"rectangular",animation:"wave",width:300,height:300})},"grid-item-key-"+a);return e}function Re(t){return s.jsx(W,{container:!0,spacing:2,justifyContent:"center",children:!t.petData||t.isLoading?je(t.itemsPerPage):t.petData.map((e,a)=>s.jsx(ke,{pet:e},"pet-id-"+a))})}function ze(t){const{petListData:e,error:a,isLoading:o,currentPage:n,totalPages:i,itemsPerPage:d}=fe(t.searchQueryURL),c=t.searchParams.get("type"),r=t.searchParams.get("location");return a?s.jsxs(xt,{severity:"error",children:["Failed to retrieve ",c," data..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ye,{petType:c,zipCode:r}),s.jsx(Re,{petData:e,isLoading:o,itemsPerPage:d}),s.jsx(me,{currentPage:n,totalPages:i,isLoading:o,onPageChange:t.onPageChange})]})}export{ze as default};
