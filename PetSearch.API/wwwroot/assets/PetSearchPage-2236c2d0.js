import{c as st,s as nt,u as rt,_ as u,h as G,r as D,a as it,d as ct,m as lt,b as C,e as dt,f as L,j as s,g as pt,i as I,k as T,l as H,n as F,o as P,T as U,p as B,q as S,P as ut,B as Z,t as gt,v as V,w as z,x as ft,y as _,M as vt,L as xt,C as yt,D as mt,z as ht,A as bt,E as Ct}from"./index-a7d9510b.js";import{u as Pt,a as $t,G as W,S as Rt,A as tt}from"./index-f57207b2.js";const jt=["component","direction","spacing","divider","children","className","useFlexGap"],At=st(),kt=nt("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function Nt(t){return rt({props:t,name:"MuiStack",defaultTheme:At})}function Mt(t,e){const a=C.Children.toArray(t).filter(Boolean);return a.reduce((o,i,n)=>(o.push(i),n<a.length-1&&o.push(C.cloneElement(e,{key:`separator-${n}`})),o),[])}const St=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],Lt=({ownerState:t,theme:e})=>{let a=u({display:"flex",flexDirection:"column"},G({theme:e},D({values:t.direction,breakpoints:e.breakpoints.values}),o=>({flexDirection:o})));if(t.spacing){const o=it(e),i=Object.keys(e.breakpoints.values).reduce((r,d)=>((typeof t.spacing=="object"&&t.spacing[d]!=null||typeof t.direction=="object"&&t.direction[d]!=null)&&(r[d]=!0),r),{}),n=D({values:t.direction,base:i}),l=D({values:t.spacing,base:i});typeof n=="object"&&Object.keys(n).forEach((r,d,h)=>{if(!n[r]){const f=d>0?n[h[d-1]]:"column";n[r]=f}}),a=ct(a,G({theme:e},l,(r,d)=>t.useFlexGap?{gap:H(o,r)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":{[`margin${St(d?n[d]:t.direction)}`]:H(o,r)}}))}return a=lt(e.breakpoints,a),a};function zt(t={}){const{createStyledComponent:e=kt,useThemeProps:a=Nt,componentName:o="MuiStack"}=t,i=()=>I({root:["root"]},r=>T(o,r),{}),n=e(Lt);return C.forwardRef(function(r,d){const h=a(r),b=dt(h),{component:f="div",direction:v="column",spacing:g=0,divider:j,children:$,className:x,useFlexGap:A=!1}=b,y=L(b,jt),M={direction:v,spacing:g,useFlexGap:A},R=i();return s.jsx(n,u({as:f,ownerState:M,ref:d,className:pt(R.root,x)},y,{children:j?Mt($,j):$}))})}function It(t){return T("MuiAlertTitle",t)}F("MuiAlertTitle",["root"]);const Tt=["className"],Bt=t=>{const{classes:e}=t;return I({root:["root"]},It,e)},Ot=P(U,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({fontWeight:t.typography.fontWeightMedium,marginTop:-2})),wt=C.forwardRef(function(e,a){const o=B({props:e,name:"MuiAlertTitle"}),{className:i}=o,n=L(o,Tt),l=o,c=Bt(l);return s.jsx(Ot,u({gutterBottom:!0,component:"div",ownerState:l,ref:a,className:S(c.root,i)},n))}),_t=wt;function Ut(t){return T("MuiCard",t)}F("MuiCard",["root"]);const Ft=["className","raised"],Vt=t=>{const{classes:e}=t;return I({root:["root"]},Ut,e)},Dt=P(ut,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),Et=C.forwardRef(function(e,a){const o=B({props:e,name:"MuiCard"}),{className:i,raised:n=!1}=o,l=L(o,Ft),c=u({},o,{raised:n}),r=Vt(c);return s.jsx(Dt,u({className:S(r.root,i),elevation:n?8:void 0,ref:a,ownerState:c},l))}),Wt=Et;function Gt(t){return T("MuiCardActionArea",t)}const Ht=F("MuiCardActionArea",["root","focusVisible","focusHighlight"]),E=Ht,Qt=["children","className","focusVisibleClassName"],qt=t=>{const{classes:e}=t;return I({root:["root"],focusHighlight:["focusHighlight"]},Gt,e)},Jt=P(Z,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${E.focusHighlight}`]:{opacity:(t.vars||t).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${E.focusVisible} .${E.focusHighlight}`]:{opacity:(t.vars||t).palette.action.focusOpacity}})),Kt=P("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(t,e)=>e.focusHighlight})(({theme:t})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:t.transitions.create("opacity",{duration:t.transitions.duration.short})})),Xt=C.forwardRef(function(e,a){const o=B({props:e,name:"MuiCardActionArea"}),{children:i,className:n,focusVisibleClassName:l}=o,c=L(o,Qt),r=o,d=qt(r);return s.jsxs(Jt,u({className:S(d.root,n),focusVisibleClassName:S(l,d.focusVisible),ref:a,ownerState:r},c,{children:[i,s.jsx(Kt,{className:d.focusHighlight,ownerState:r})]}))}),Yt=Xt;function Zt(t){return T("MuiPagination",t)}F("MuiPagination",["root","ul","outlined","text"]);const te=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function ee(t={}){const{boundaryCount:e=1,componentName:a="usePagination",count:o=1,defaultPage:i=1,disabled:n=!1,hideNextButton:l=!1,hidePrevButton:c=!1,onChange:r,page:d,showFirstButton:h=!1,showLastButton:b=!1,siblingCount:f=1}=t,v=L(t,te),[g,j]=gt({controlled:d,default:i,name:a,state:"page"}),$=(p,N)=>{d||j(N),r&&r(p,N)},x=(p,N)=>{const at=N-p+1;return Array.from({length:at},(_e,ot)=>p+ot)},A=x(1,Math.min(e,o)),y=x(Math.max(o-e+1,e+1),o),M=Math.max(Math.min(g-f,o-e-f*2-1),e+2),R=Math.min(Math.max(g+f,e+f*2+2),y.length>0?y[0]-2:o-1),O=[...h?["first"]:[],...c?[]:["previous"],...A,...M>e+2?["start-ellipsis"]:e+1<o-e?[e+1]:[],...x(M,R),...R<o-e-1?["end-ellipsis"]:o-e>e?[o-e]:[],...y,...l?[]:["next"],...b?["last"]:[]],w=p=>{switch(p){case"first":return 1;case"previous":return g-1;case"next":return g+1;case"last":return o;default:return null}},k=O.map(p=>typeof p=="number"?{onClick:N=>{$(N,p)},type:"page",page:p,selected:p===g,disabled:n,"aria-current":p===g?"true":void 0}:{onClick:N=>{$(N,w(p))},type:p,page:w(p),selected:!1,disabled:n||p.indexOf("ellipsis")===-1&&(p==="next"||p==="last"?g>=o:g<=1)});return u({items:k},v)}function ae(t){return T("MuiPaginationItem",t)}const oe=F("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),m=oe,Q=V(s.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),q=V(s.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),J=V(s.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),K=V(s.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),se=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],et=(t,e)=>{const{ownerState:a}=t;return[e.root,e[a.variant],e[`size${_(a.size)}`],a.variant==="text"&&e[`text${_(a.color)}`],a.variant==="outlined"&&e[`outlined${_(a.color)}`],a.shape==="rounded"&&e.rounded,a.type==="page"&&e.page,(a.type==="start-ellipsis"||a.type==="end-ellipsis")&&e.ellipsis,(a.type==="previous"||a.type==="next")&&e.previousNext,(a.type==="first"||a.type==="last")&&e.firstLast]},ne=t=>{const{classes:e,color:a,disabled:o,selected:i,size:n,shape:l,type:c,variant:r}=t,d={root:["root",`size${_(n)}`,r,l,a!=="standard"&&`${r}${_(a)}`,o&&"disabled",i&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[c]],icon:["icon"]};return I(d,ae,e)},re=P("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:et})(({theme:t,ownerState:e})=>u({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto",[`&.${m.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},e.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)})),ie=P(Z,{name:"MuiPaginationItem",slot:"Root",overridesResolver:et})(({theme:t,ownerState:e})=>u({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,[`&.${m.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${m.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${m.selected}`]:{backgroundColor:(t.vars||t).palette.action.selected,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selected} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:z(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${m.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selected} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:z(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},[`&.${m.disabled}`]:{opacity:1,color:(t.vars||t).palette.action.disabled,backgroundColor:(t.vars||t).palette.action.selected}}},e.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},e.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)},e.shape==="rounded"&&{borderRadius:(t.vars||t).shape.borderRadius}),({theme:t,ownerState:e})=>u({},e.variant==="text"&&{[`&.${m.selected}`]:u({},e.color!=="standard"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}},[`&.${m.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}},{[`&.${m.disabled}`]:{color:(t.vars||t).palette.action.disabled}})},e.variant==="outlined"&&{border:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${m.selected}`]:u({},e.color!=="standard"&&{color:(t.vars||t).palette[e.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:z(t.palette[e.color].main,.5)}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.activatedOpacity})`:z(t.palette[e.color].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:z(t.palette[e.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${m.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:z(t.palette[e.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}},{[`&.${m.disabled}`]:{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}})})),ce=P("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(t,e)=>e.icon})(({theme:t,ownerState:e})=>u({fontSize:t.typography.pxToRem(20),margin:"0 -8px"},e.size==="small"&&{fontSize:t.typography.pxToRem(18)},e.size==="large"&&{fontSize:t.typography.pxToRem(22)})),le=C.forwardRef(function(e,a){const o=B({props:e,name:"MuiPaginationItem"}),{className:i,color:n="standard",component:l,components:c={},disabled:r=!1,page:d,selected:h=!1,shape:b="circular",size:f="medium",slots:v={},type:g="page",variant:j="text"}=o,$=L(o,se),x=u({},o,{color:n,disabled:r,selected:h,shape:b,size:f,type:g,variant:j}),A=ft(),y=ne(x),R=(A.direction==="rtl"?{previous:v.next||c.next||K,next:v.previous||c.previous||J,last:v.first||c.first||Q,first:v.last||c.last||q}:{previous:v.previous||c.previous||J,next:v.next||c.next||K,first:v.first||c.first||Q,last:v.last||c.last||q})[g];return g==="start-ellipsis"||g==="end-ellipsis"?s.jsx(re,{ref:a,ownerState:x,className:S(y.root,i),children:"…"}):s.jsxs(ie,u({ref:a,ownerState:x,component:l,disabled:r,className:S(y.root,i)},$,{children:[g==="page"&&d,R?s.jsx(ce,{as:R,ownerState:x,className:y.icon}):null]}))}),de=le,pe=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],ue=t=>{const{classes:e,variant:a}=t;return I({root:["root",a],ul:["ul"]},Zt,e)},ge=P("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:a}=t;return[e.root,e[a.variant]]}})({}),fe=P("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(t,e)=>e.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function ve(t,e,a){return t==="page"?`${a?"":"Go to "}page ${e}`:`Go to ${t} page`}const xe=C.forwardRef(function(e,a){const o=B({props:e,name:"MuiPagination"}),{boundaryCount:i=1,className:n,color:l="standard",count:c=1,defaultPage:r=1,disabled:d=!1,getItemAriaLabel:h=ve,hideNextButton:b=!1,hidePrevButton:f=!1,renderItem:v=k=>s.jsx(de,u({},k)),shape:g="circular",showFirstButton:j=!1,showLastButton:$=!1,siblingCount:x=1,size:A="medium",variant:y="text"}=o,M=L(o,pe),{items:R}=ee(u({},o,{componentName:"Pagination"})),O=u({},o,{boundaryCount:i,color:l,count:c,defaultPage:r,disabled:d,getItemAriaLabel:h,hideNextButton:b,hidePrevButton:f,renderItem:v,shape:g,showFirstButton:j,showLastButton:$,siblingCount:x,size:A,variant:y}),w=ue(O);return s.jsx(ge,u({"aria-label":"pagination navigation",className:S(w.root,n),ownerState:O,ref:a},M,{children:s.jsx(fe,{className:w.ul,ownerState:O,children:R.map((k,p)=>s.jsx("li",{children:v(u({},k,{color:l,"aria-label":h(k.type,k.page,k.selected),shape:g,size:A,variant:y}))},p))})}))}),ye=xe,me=zt({createStyledComponent:P("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>B({props:t,name:"MuiStack"})}),he=me,be="/api/",Ce=20,Pe=async t=>{const e=await fetch(be+t,{method:"GET"});if(!e.ok){const o=await e.json();throw new Error((o==null?void 0:o.message)||e.statusText)}return await e.json()},$e={revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1};function Re(t){const e=C.useRef(1),a=C.useRef(1),{data:o,error:i,isLoading:n}=Pt(t,l=>Pe(l),$e);return o!=null&&o.pagination&&(a.current!==o.pagination.total_pages&&(a.current=o.pagination.total_pages),e.current!==o.pagination.current_page&&(e.current=o.pagination.current_page)),{petListData:o==null?void 0:o.pets,error:i,isLoading:n,currentPage:e.current,totalPages:a.current,itemsPerPage:Ce}}const je={textAlign:"center",marginBottom:"1rem",marginTop:"2rem"},Ae={textAlign:"center",marginBottom:"20px"};function ke(t){return s.jsxs(s.Fragment,{children:[s.jsxs(U,{sx:je,variant:"h2",children:["Adoptable ",t.petType,"s within 50 mile",t.petType.length>1?"s":"","."]}),s.jsx(U,{sx:Ae,variant:"subtitle1",children:t.locationName})]})}const Ne={paddingTop:"2rem"};function Me(t){return s.jsx(he,{spacing:2,direction:"row",justifyContent:"center",alignItems:"center",children:s.jsx(ye,{count:t.totalPages,page:t.currentPage,color:"primary",showFirstButton:!0,onChange:t.onPageChange,disabled:t.isLoading,size:"large",sx:Ne,variant:"outlined"})})}const Se="_imageContainer_pbgyy_1",Le={imageContainer:Se},X={fontSize:"300px",color:"primary"},ze={marginBottom:"16px",textAlign:"center"},Ie={marginBottom:"6px",textAlign:"center"};function Te(t){var l;const{mutate:e}=$t();async function a(){await e(`pets/${t.pet.id}`,t.pet)}const o=((l=t.pet.primary_photo_cropped)==null?void 0:l.small)??null,i=t.pet.distance?t.pet.distance.toFixed(1):"0";let n="";return i!=="0"&&(n=`${i} miles away`),s.jsx(W,{item:!0,children:s.jsx(vt,{component:xt,style:{textDecoration:"none"},to:`/pets/${t.pet.id}`,state:{fromSearch:!0},preventScrollReset:!1,children:s.jsx(Yt,{onClick:a,children:s.jsxs(Wt,{sx:{maxWidth:"300px"},elevation:3,children:[o?s.jsx("div",{className:Le.imageContainer,children:s.jsx("img",{src:o,alt:t.pet.name,loading:"lazy",decoding:"async"})}):t.pet.type=="Cat"?s.jsx(yt,{sx:X}):s.jsx(mt,{sx:X}),s.jsx(U,{variant:"h6",noWrap:!0,sx:Ie,children:t.pet.name}),s.jsxs(U,{sx:ze,children:[t.pet.age," ",t.pet.gender,s.jsx("br",{}),n]})]})})})},t.pet.id)}function Be(t){const e=new Array(t);for(let a=0;a<e.length;a++)e[a]=s.jsx(W,{item:!0,children:s.jsx(Rt,{variant:"rectangular",animation:"wave",width:300,height:300})},"grid-item-key-"+a);return e}function Oe(t){return s.jsx(W,{container:!0,spacing:2,justifyContent:"center",children:!t.petData||t.isLoading?Be(t.itemsPerPage):t.petData.map((e,a)=>s.jsx(Te,{pet:e},"pet-id-"+a))})}function we(t){const{petListData:e,error:a,isLoading:o,currentPage:i,totalPages:n,itemsPerPage:l}=Re(t.searchQueryURL),c=t.searchParams.get("type");return a?s.jsxs(tt,{severity:"error",children:["Failed to retrieve ",c," data..."]}):s.jsxs(s.Fragment,{children:[s.jsx(ke,{petType:c,locationName:t.locationName}),s.jsx(Oe,{petData:e,isLoading:o,itemsPerPage:l}),s.jsx(Me,{currentPage:i,totalPages:n,isLoading:o,onPageChange:t.onPageChange})]})}const Y=new Map().set("dogs","dog").set("cats","cat");function Ve(){const{location:t}=C.useContext(ht),e=bt(),[a,o]=Ct(),i=e.petType??"";if(!Y.has(i))return s.jsxs(tt,{severity:"error",children:[s.jsx(_t,{children:"Error"}),"Pet Type: ",i," not supported."]});const n=(h,b)=>{const f=new URLSearchParams(a);f.set("page",b.toString()),o(f)},l=a.get("location")??t.zipcode,c=a.get("page")??"1",r=new URLSearchParams;r.append("type",Y.get(i)),r.append("location",l),r.append("page",c);const d="pets?"+r.toString();return s.jsx(we,{locationName:t.locationName,searchParams:r,searchQueryURL:d,onPageChange:n})}export{Ve as default};
