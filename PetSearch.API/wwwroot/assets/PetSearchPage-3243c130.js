import{c as st,s as nt,u as rt,_ as u,h as G,r as D,a as it,d as ct,m as lt,b as C,e as dt,f as L,j as s,g as S,i as T,k as I,l as H,n as U,o as P,T as F,p as B,P as pt,B as Y,q as ut,t as V,v as z,w as gt,x as _,M as ft,L as vt,C as xt,D as yt,y as mt,z as ht,A as bt}from"./index-f01f7c47.js";import{u as Ct,a as Pt,b as $t,G as W,S as Rt,A as tt}from"./useToken-f9026729.js";const jt=["component","direction","spacing","divider","children","className","useFlexGap"],kt=st(),At=nt("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function Mt(t){return rt({props:t,name:"MuiStack",defaultTheme:kt})}function St(t,e){const a=C.Children.toArray(t).filter(Boolean);return a.reduce((o,n,i)=>(o.push(n),i<a.length-1&&o.push(C.cloneElement(e,{key:`separator-${i}`})),o),[])}const Nt=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],Lt=({ownerState:t,theme:e})=>{let a=u({display:"flex",flexDirection:"column"},G({theme:e},D({values:t.direction,breakpoints:e.breakpoints.values}),o=>({flexDirection:o})));if(t.spacing){const o=it(e),n=Object.keys(e.breakpoints.values).reduce((r,d)=>((typeof t.spacing=="object"&&t.spacing[d]!=null||typeof t.direction=="object"&&t.direction[d]!=null)&&(r[d]=!0),r),{}),i=D({values:t.direction,base:n}),l=D({values:t.spacing,base:n});typeof i=="object"&&Object.keys(i).forEach((r,d,h)=>{if(!i[r]){const f=d>0?i[h[d-1]]:"column";i[r]=f}}),a=ct(a,G({theme:e},l,(r,d)=>t.useFlexGap?{gap:H(o,r)}:{"& > :not(style) + :not(style)":{margin:0,[`margin${Nt(d?i[d]:t.direction)}`]:H(o,r)}}))}return a=lt(e.breakpoints,a),a};function zt(t={}){const{createStyledComponent:e=At,useThemeProps:a=Mt,componentName:o="MuiStack"}=t,n=()=>T({root:["root"]},r=>I(o,r),{}),i=e(Lt);return C.forwardRef(function(r,d){const h=a(r),b=dt(h),{component:f="div",direction:v="column",spacing:g=0,divider:j,children:$,className:x,useFlexGap:k=!1}=b,y=L(b,jt),N={direction:v,spacing:g,useFlexGap:k},R=n();return s.jsx(i,u({as:f,ownerState:N,ref:d,className:S(R.root,x)},y,{children:j?St($,j):$}))})}function Tt(t){return I("MuiAlertTitle",t)}U("MuiAlertTitle",["root"]);const It=["className"],Bt=t=>{const{classes:e}=t;return T({root:["root"]},Tt,e)},wt=P(F,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({fontWeight:t.typography.fontWeightMedium,marginTop:-2})),Ot=C.forwardRef(function(e,a){const o=B({props:e,name:"MuiAlertTitle"}),{className:n}=o,i=L(o,It),l=o,c=Bt(l);return s.jsx(wt,u({gutterBottom:!0,component:"div",ownerState:l,ref:a,className:S(c.root,n)},i))}),_t=Ot;function Ft(t){return I("MuiCard",t)}U("MuiCard",["root"]);const Ut=["className","raised"],Vt=t=>{const{classes:e}=t;return T({root:["root"]},Ft,e)},Dt=P(pt,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),Et=C.forwardRef(function(e,a){const o=B({props:e,name:"MuiCard"}),{className:n,raised:i=!1}=o,l=L(o,Ut),c=u({},o,{raised:i}),r=Vt(c);return s.jsx(Dt,u({className:S(r.root,n),elevation:i?8:void 0,ref:a,ownerState:c},l))}),Wt=Et;function Gt(t){return I("MuiCardActionArea",t)}const Ht=U("MuiCardActionArea",["root","focusVisible","focusHighlight"]),E=Ht,Qt=["children","className","focusVisibleClassName"],qt=t=>{const{classes:e}=t;return T({root:["root"],focusHighlight:["focusHighlight"]},Gt,e)},Zt=P(Y,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${E.focusHighlight}`]:{opacity:(t.vars||t).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${E.focusVisible} .${E.focusHighlight}`]:{opacity:(t.vars||t).palette.action.focusOpacity}})),Jt=P("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(t,e)=>e.focusHighlight})(({theme:t})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:t.transitions.create("opacity",{duration:t.transitions.duration.short})})),Kt=C.forwardRef(function(e,a){const o=B({props:e,name:"MuiCardActionArea"}),{children:n,className:i,focusVisibleClassName:l}=o,c=L(o,Qt),r=o,d=qt(r);return s.jsxs(Zt,u({className:S(d.root,i),focusVisibleClassName:S(l,d.focusVisible),ref:a,ownerState:r},c,{children:[n,s.jsx(Jt,{className:d.focusHighlight,ownerState:r})]}))}),Xt=Kt;function Yt(t){return I("MuiPagination",t)}U("MuiPagination",["root","ul","outlined","text"]);const te=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function ee(t={}){const{boundaryCount:e=1,componentName:a="usePagination",count:o=1,defaultPage:n=1,disabled:i=!1,hideNextButton:l=!1,hidePrevButton:c=!1,onChange:r,page:d,showFirstButton:h=!1,showLastButton:b=!1,siblingCount:f=1}=t,v=L(t,te),[g,j]=ut({controlled:d,default:n,name:a,state:"page"}),$=(p,M)=>{d||j(M),r&&r(p,M)},x=(p,M)=>{const at=M-p+1;return Array.from({length:at},(_e,ot)=>p+ot)},k=x(1,Math.min(e,o)),y=x(Math.max(o-e+1,e+1),o),N=Math.max(Math.min(g-f,o-e-f*2-1),e+2),R=Math.min(Math.max(g+f,e+f*2+2),y.length>0?y[0]-2:o-1),w=[...h?["first"]:[],...c?[]:["previous"],...k,...N>e+2?["start-ellipsis"]:e+1<o-e?[e+1]:[],...x(N,R),...R<o-e-1?["end-ellipsis"]:o-e>e?[o-e]:[],...y,...l?[]:["next"],...b?["last"]:[]],O=p=>{switch(p){case"first":return 1;case"previous":return g-1;case"next":return g+1;case"last":return o;default:return null}},A=w.map(p=>typeof p=="number"?{onClick:M=>{$(M,p)},type:"page",page:p,selected:p===g,disabled:i,"aria-current":p===g?"true":void 0}:{onClick:M=>{$(M,O(p))},type:p,page:O(p),selected:!1,disabled:i||p.indexOf("ellipsis")===-1&&(p==="next"||p==="last"?g>=o:g<=1)});return u({items:A},v)}function ae(t){return I("MuiPaginationItem",t)}const oe=U("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),m=oe,Q=V(s.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),q=V(s.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Z=V(s.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),J=V(s.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),se=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],et=(t,e)=>{const{ownerState:a}=t;return[e.root,e[a.variant],e[`size${_(a.size)}`],a.variant==="text"&&e[`text${_(a.color)}`],a.variant==="outlined"&&e[`outlined${_(a.color)}`],a.shape==="rounded"&&e.rounded,a.type==="page"&&e.page,(a.type==="start-ellipsis"||a.type==="end-ellipsis")&&e.ellipsis,(a.type==="previous"||a.type==="next")&&e.previousNext,(a.type==="first"||a.type==="last")&&e.firstLast]},ne=t=>{const{classes:e,color:a,disabled:o,selected:n,size:i,shape:l,type:c,variant:r}=t,d={root:["root",`size${_(i)}`,r,l,a!=="standard"&&`${r}${_(a)}`,o&&"disabled",n&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[c]],icon:["icon"]};return T(d,ae,e)},re=P("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:et})(({theme:t,ownerState:e})=>u({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto",[`&.${m.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},e.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)})),ie=P(Y,{name:"MuiPaginationItem",slot:"Root",overridesResolver:et})(({theme:t,ownerState:e})=>u({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,[`&.${m.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${m.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${m.selected}`]:{backgroundColor:(t.vars||t).palette.action.selected,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selected} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:z(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${m.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selected} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:z(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},[`&.${m.disabled}`]:{opacity:1,color:(t.vars||t).palette.action.disabled,backgroundColor:(t.vars||t).palette.action.selected}}},e.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},e.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)},e.shape==="rounded"&&{borderRadius:(t.vars||t).shape.borderRadius}),({theme:t,ownerState:e})=>u({},e.variant==="text"&&{[`&.${m.selected}`]:u({},e.color!=="standard"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}},[`&.${m.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}},{[`&.${m.disabled}`]:{color:(t.vars||t).palette.action.disabled}})},e.variant==="outlined"&&{border:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${m.selected}`]:u({},e.color!=="standard"&&{color:(t.vars||t).palette[e.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:z(t.palette[e.color].main,.5)}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.activatedOpacity})`:z(t.palette[e.color].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:z(t.palette[e.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${m.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:z(t.palette[e.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}},{[`&.${m.disabled}`]:{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}})})),ce=P("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(t,e)=>e.icon})(({theme:t,ownerState:e})=>u({fontSize:t.typography.pxToRem(20),margin:"0 -8px"},e.size==="small"&&{fontSize:t.typography.pxToRem(18)},e.size==="large"&&{fontSize:t.typography.pxToRem(22)})),le=C.forwardRef(function(e,a){const o=B({props:e,name:"MuiPaginationItem"}),{className:n,color:i="standard",component:l,components:c={},disabled:r=!1,page:d,selected:h=!1,shape:b="circular",size:f="medium",slots:v={},type:g="page",variant:j="text"}=o,$=L(o,se),x=u({},o,{color:i,disabled:r,selected:h,shape:b,size:f,type:g,variant:j}),k=gt(),y=ne(x),R=(k.direction==="rtl"?{previous:v.next||c.next||J,next:v.previous||c.previous||Z,last:v.first||c.first||Q,first:v.last||c.last||q}:{previous:v.previous||c.previous||Z,next:v.next||c.next||J,first:v.first||c.first||Q,last:v.last||c.last||q})[g];return g==="start-ellipsis"||g==="end-ellipsis"?s.jsx(re,{ref:a,ownerState:x,className:S(y.root,n),children:"…"}):s.jsxs(ie,u({ref:a,ownerState:x,component:l,disabled:r,className:S(y.root,n)},$,{children:[g==="page"&&d,R?s.jsx(ce,{as:R,ownerState:x,className:y.icon}):null]}))}),de=le,pe=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],ue=t=>{const{classes:e,variant:a}=t;return T({root:["root",a],ul:["ul"]},Yt,e)},ge=P("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:a}=t;return[e.root,e[a.variant]]}})({}),fe=P("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(t,e)=>e.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function ve(t,e,a){return t==="page"?`${a?"":"Go to "}page ${e}`:`Go to ${t} page`}const xe=C.forwardRef(function(e,a){const o=B({props:e,name:"MuiPagination"}),{boundaryCount:n=1,className:i,color:l="standard",count:c=1,defaultPage:r=1,disabled:d=!1,getItemAriaLabel:h=ve,hideNextButton:b=!1,hidePrevButton:f=!1,renderItem:v=A=>s.jsx(de,u({},A)),shape:g="circular",showFirstButton:j=!1,showLastButton:$=!1,siblingCount:x=1,size:k="medium",variant:y="text"}=o,N=L(o,pe),{items:R}=ee(u({},o,{componentName:"Pagination"})),w=u({},o,{boundaryCount:n,color:l,count:c,defaultPage:r,disabled:d,getItemAriaLabel:h,hideNextButton:b,hidePrevButton:f,renderItem:v,shape:g,showFirstButton:j,showLastButton:$,siblingCount:x,size:k,variant:y}),O=ue(w);return s.jsx(ge,u({"aria-label":"pagination navigation",className:S(O.root,i),ownerState:w,ref:a},N,{children:s.jsx(fe,{className:O.ul,ownerState:w,children:R.map((A,p)=>s.jsx("li",{children:v(u({},A,{color:l,"aria-label":h(A.type,A.page,A.selected),shape:g,size:k,variant:y}))},p))})}))}),ye=xe,me=zt({createStyledComponent:P("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>B({props:t,name:"MuiStack"})}),he=me,be="/api/",Ce=20,Pe=async(t,e)=>{if(!e)throw new Error("Failed to validate token");const a=await fetch(be+t,{method:"GET",headers:{Authorization:e.token,"Content-Type":"application/json"}});if(!a.ok){const n=await a.json();throw new Error((n==null?void 0:n.message)||a.statusText)}return await a.json()},$e={revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1};function Re(t){const{accessToken:e}=Ct(),a=C.useRef(1),o=C.useRef(1),{data:n,error:i,isLoading:l}=Pt(e?t:null,c=>Pe(c,e),$e);return n!=null&&n.pagination&&(o.current!==n.pagination.total_pages&&(o.current=n.pagination.total_pages),a.current!==n.pagination.current_page&&(a.current=n.pagination.current_page)),{petListData:n==null?void 0:n.pets,error:i,isLoading:l,currentPage:a.current,totalPages:o.current,itemsPerPage:Ce}}const je={textAlign:"center",marginBottom:"1rem",marginTop:"2rem"},ke={textAlign:"center",marginBottom:"20px"};function Ae(t){return s.jsxs(s.Fragment,{children:[s.jsxs(F,{sx:je,variant:"h2",children:["Adoptable ",t.petType,"s within 50 mile",t.petType.length>1?"s":"","."]}),s.jsxs(F,{sx:ke,variant:"subtitle1",children:["Zip Code: ",t.zipCode]})]})}const Me={paddingTop:"2rem"};function Se(t){return s.jsx(he,{spacing:2,direction:"row",justifyContent:"center",alignItems:"center",children:s.jsx(ye,{count:t.totalPages,page:t.currentPage,color:"primary",showFirstButton:!0,onChange:t.onPageChange,disabled:t.isLoading,size:"large",sx:Me,variant:"outlined"})})}const Ne="_imageContainer_pbgyy_1",Le={imageContainer:Ne},K={fontSize:"300px",color:"primary"},ze={marginBottom:"16px",textAlign:"center"},Te={marginBottom:"6px",textAlign:"center"};function Ie(t){var l;const{mutate:e}=$t();async function a(){await e(`pets/${t.pet.id}`,t.pet)}const o=((l=t.pet.primary_photo_cropped)==null?void 0:l.small)??null,n=t.pet.distance?t.pet.distance.toFixed(1):"0";let i="";return n!=="0"&&(i=`${n} miles away`),s.jsx(W,{item:!0,children:s.jsx(ft,{component:vt,style:{textDecoration:"none"},to:`/pets/${t.pet.id}`,state:{fromSearch:!0},preventScrollReset:!1,children:s.jsx(Xt,{onClick:a,children:s.jsxs(Wt,{sx:{maxWidth:"300px"},elevation:3,children:[o?s.jsx("div",{className:Le.imageContainer,children:s.jsx("img",{src:o,alt:t.pet.name,loading:"lazy",decoding:"async"})}):t.pet.type=="Cat"?s.jsx(xt,{sx:K}):s.jsx(yt,{sx:K}),s.jsx(F,{variant:"h6",noWrap:!0,sx:Te,children:t.pet.name}),s.jsxs(F,{sx:ze,children:[t.pet.age," ",t.pet.gender,s.jsx("br",{}),i]})]})})})},t.pet.id)}function Be(t){const e=new Array(t);for(let a=0;a<e.length;a++)e[a]=s.jsx(W,{item:!0,children:s.jsx(Rt,{variant:"rectangular",animation:"wave",width:300,height:300})},"grid-item-key-"+a);return e}function we(t){return s.jsx(W,{container:!0,spacing:2,justifyContent:"center",children:!t.petData||t.isLoading?Be(t.itemsPerPage):t.petData.map((e,a)=>s.jsx(Ie,{pet:e},"pet-id-"+a))})}function Oe(t){const{petListData:e,error:a,isLoading:o,currentPage:n,totalPages:i,itemsPerPage:l}=Re(t.searchQueryURL),c=t.searchParams.get("type"),r=t.searchParams.get("location");return a?s.jsxs(tt,{severity:"error",children:["Failed to retrieve ",c," data..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ae,{petType:c,zipCode:r}),s.jsx(we,{petData:e,isLoading:o,itemsPerPage:l}),s.jsx(Se,{currentPage:n,totalPages:i,isLoading:o,onPageChange:t.onPageChange})]})}const X=new Map().set("dogs","dog").set("cats","cat");function Ve(){const{zipCode:t}=C.useContext(mt),e=ht(),[a,o]=bt(),n=e.petType??"";if(!X.has(n))return s.jsxs(tt,{severity:"error",children:[s.jsx(_t,{children:"Error"}),"Pet Type: ",n," not supported."]});const i=(h,b)=>{const f=new URLSearchParams(a);f.set("page",b.toString()),o(f)},l=a.get("location")??t,c=a.get("page")??"1",r=new URLSearchParams;r.append("type",X.get(n)),r.append("location",l),r.append("page",c);const d="pets?"+r.toString();return s.jsx(Oe,{searchParams:r,searchQueryURL:d,onPageChange:i})}export{Ve as default};
