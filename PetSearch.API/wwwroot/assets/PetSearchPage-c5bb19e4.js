import{c as st,s as nt,u as rt,_ as u,h as G,r as D,a as it,d as ct,m as lt,b as C,e as dt,f as L,j as s,g as S,i as I,k as T,l as H,n as F,o as P,T as U,p as B,P as pt,B as Y,q as ut,t as V,v as z,w as gt,x as _,M as ft,L as vt,C as xt,D as yt,y as mt,z as ht,A as bt}from"./index-09e4fc66.js";import{u as Ct,a as Pt,G as W,S as $t,A as tt}from"./index-850a9108.js";const Rt=["component","direction","spacing","divider","children","className","useFlexGap"],jt=st(),At=nt("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root});function kt(t){return rt({props:t,name:"MuiStack",defaultTheme:jt})}function Mt(t,e){const a=C.Children.toArray(t).filter(Boolean);return a.reduce((o,i,r)=>(o.push(i),r<a.length-1&&o.push(C.cloneElement(e,{key:`separator-${r}`})),o),[])}const St=t=>({row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"})[t],Nt=({ownerState:t,theme:e})=>{let a=u({display:"flex",flexDirection:"column"},G({theme:e},D({values:t.direction,breakpoints:e.breakpoints.values}),o=>({flexDirection:o})));if(t.spacing){const o=it(e),i=Object.keys(e.breakpoints.values).reduce((n,d)=>((typeof t.spacing=="object"&&t.spacing[d]!=null||typeof t.direction=="object"&&t.direction[d]!=null)&&(n[d]=!0),n),{}),r=D({values:t.direction,base:i}),l=D({values:t.spacing,base:i});typeof r=="object"&&Object.keys(r).forEach((n,d,h)=>{if(!r[n]){const f=d>0?r[h[d-1]]:"column";r[n]=f}}),a=ct(a,G({theme:e},l,(n,d)=>t.useFlexGap?{gap:H(o,n)}:{"& > :not(style) + :not(style)":{margin:0,[`margin${St(d?r[d]:t.direction)}`]:H(o,n)}}))}return a=lt(e.breakpoints,a),a};function Lt(t={}){const{createStyledComponent:e=At,useThemeProps:a=kt,componentName:o="MuiStack"}=t,i=()=>I({root:["root"]},n=>T(o,n),{}),r=e(Nt);return C.forwardRef(function(n,d){const h=a(n),b=dt(h),{component:f="div",direction:v="column",spacing:g=0,divider:j,children:$,className:x,useFlexGap:A=!1}=b,y=L(b,Rt),N={direction:v,spacing:g,useFlexGap:A},R=i();return s.jsx(r,u({as:f,ownerState:N,ref:d,className:S(R.root,x)},y,{children:j?Mt($,j):$}))})}function zt(t){return T("MuiAlertTitle",t)}F("MuiAlertTitle",["root"]);const It=["className"],Tt=t=>{const{classes:e}=t;return I({root:["root"]},zt,e)},Bt=P(U,{name:"MuiAlertTitle",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({fontWeight:t.typography.fontWeightMedium,marginTop:-2})),Ot=C.forwardRef(function(e,a){const o=B({props:e,name:"MuiAlertTitle"}),{className:i}=o,r=L(o,It),l=o,c=Tt(l);return s.jsx(Bt,u({gutterBottom:!0,component:"div",ownerState:l,ref:a,className:S(c.root,i)},r))}),wt=Ot;function _t(t){return T("MuiCard",t)}F("MuiCard",["root"]);const Ut=["className","raised"],Ft=t=>{const{classes:e}=t;return I({root:["root"]},_t,e)},Vt=P(pt,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),Dt=C.forwardRef(function(e,a){const o=B({props:e,name:"MuiCard"}),{className:i,raised:r=!1}=o,l=L(o,Ut),c=u({},o,{raised:r}),n=Ft(c);return s.jsx(Vt,u({className:S(n.root,i),elevation:r?8:void 0,ref:a,ownerState:c},l))}),Et=Dt;function Wt(t){return T("MuiCardActionArea",t)}const Gt=F("MuiCardActionArea",["root","focusVisible","focusHighlight"]),E=Gt,Ht=["children","className","focusVisibleClassName"],Qt=t=>{const{classes:e}=t;return I({root:["root"],focusHighlight:["focusHighlight"]},Wt,e)},qt=P(Y,{name:"MuiCardActionArea",slot:"Root",overridesResolver:(t,e)=>e.root})(({theme:t})=>({display:"block",textAlign:"inherit",borderRadius:"inherit",width:"100%",[`&:hover .${E.focusHighlight}`]:{opacity:(t.vars||t).palette.action.hoverOpacity,"@media (hover: none)":{opacity:0}},[`&.${E.focusVisible} .${E.focusHighlight}`]:{opacity:(t.vars||t).palette.action.focusOpacity}})),Zt=P("span",{name:"MuiCardActionArea",slot:"FocusHighlight",overridesResolver:(t,e)=>e.focusHighlight})(({theme:t})=>({overflow:"hidden",pointerEvents:"none",position:"absolute",top:0,right:0,bottom:0,left:0,borderRadius:"inherit",opacity:0,backgroundColor:"currentcolor",transition:t.transitions.create("opacity",{duration:t.transitions.duration.short})})),Jt=C.forwardRef(function(e,a){const o=B({props:e,name:"MuiCardActionArea"}),{children:i,className:r,focusVisibleClassName:l}=o,c=L(o,Ht),n=o,d=Qt(n);return s.jsxs(qt,u({className:S(d.root,r),focusVisibleClassName:S(l,d.focusVisible),ref:a,ownerState:n},c,{children:[i,s.jsx(Zt,{className:d.focusHighlight,ownerState:n})]}))}),Kt=Jt;function Xt(t){return T("MuiPagination",t)}F("MuiPagination",["root","ul","outlined","text"]);const Yt=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function te(t={}){const{boundaryCount:e=1,componentName:a="usePagination",count:o=1,defaultPage:i=1,disabled:r=!1,hideNextButton:l=!1,hidePrevButton:c=!1,onChange:n,page:d,showFirstButton:h=!1,showLastButton:b=!1,siblingCount:f=1}=t,v=L(t,Yt),[g,j]=ut({controlled:d,default:i,name:a,state:"page"}),$=(p,M)=>{d||j(M),n&&n(p,M)},x=(p,M)=>{const at=M-p+1;return Array.from({length:at},(we,ot)=>p+ot)},A=x(1,Math.min(e,o)),y=x(Math.max(o-e+1,e+1),o),N=Math.max(Math.min(g-f,o-e-f*2-1),e+2),R=Math.min(Math.max(g+f,e+f*2+2),y.length>0?y[0]-2:o-1),O=[...h?["first"]:[],...c?[]:["previous"],...A,...N>e+2?["start-ellipsis"]:e+1<o-e?[e+1]:[],...x(N,R),...R<o-e-1?["end-ellipsis"]:o-e>e?[o-e]:[],...y,...l?[]:["next"],...b?["last"]:[]],w=p=>{switch(p){case"first":return 1;case"previous":return g-1;case"next":return g+1;case"last":return o;default:return null}},k=O.map(p=>typeof p=="number"?{onClick:M=>{$(M,p)},type:"page",page:p,selected:p===g,disabled:r,"aria-current":p===g?"true":void 0}:{onClick:M=>{$(M,w(p))},type:p,page:w(p),selected:!1,disabled:r||p.indexOf("ellipsis")===-1&&(p==="next"||p==="last"?g>=o:g<=1)});return u({items:k},v)}function ee(t){return T("MuiPaginationItem",t)}const ae=F("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon"]),m=ae,Q=V(s.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),q=V(s.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Z=V(s.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),J=V(s.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),oe=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],et=(t,e)=>{const{ownerState:a}=t;return[e.root,e[a.variant],e[`size${_(a.size)}`],a.variant==="text"&&e[`text${_(a.color)}`],a.variant==="outlined"&&e[`outlined${_(a.color)}`],a.shape==="rounded"&&e.rounded,a.type==="page"&&e.page,(a.type==="start-ellipsis"||a.type==="end-ellipsis")&&e.ellipsis,(a.type==="previous"||a.type==="next")&&e.previousNext,(a.type==="first"||a.type==="last")&&e.firstLast]},se=t=>{const{classes:e,color:a,disabled:o,selected:i,size:r,shape:l,type:c,variant:n}=t,d={root:["root",`size${_(r)}`,n,l,a!=="standard"&&`${n}${_(a)}`,o&&"disabled",i&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[c]],icon:["icon"]};return I(d,ee,e)},ne=P("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:et})(({theme:t,ownerState:e})=>u({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,height:"auto",[`&.${m.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity}},e.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},e.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)})),re=P(Y,{name:"MuiPaginationItem",slot:"Root",overridesResolver:et})(({theme:t,ownerState:e})=>u({},t.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(t.vars||t).palette.text.primary,[`&.${m.focusVisible}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${m.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity},transition:t.transitions.create(["color","background-color"],{duration:t.transitions.duration.short}),"&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${m.selected}`]:{backgroundColor:(t.vars||t).palette.action.selected,"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selected} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:z(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(t.vars||t).palette.action.selected}},[`&.${m.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.action.selected} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:z(t.palette.action.selected,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)},[`&.${m.disabled}`]:{opacity:1,color:(t.vars||t).palette.action.disabled,backgroundColor:(t.vars||t).palette.action.selected}}},e.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},e.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:t.typography.pxToRem(15)},e.shape==="rounded"&&{borderRadius:(t.vars||t).shape.borderRadius}),({theme:t,ownerState:e})=>u({},e.variant==="text"&&{[`&.${m.selected}`]:u({},e.color!=="standard"&&{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main,"&:hover":{backgroundColor:(t.vars||t).palette[e.color].dark,"@media (hover: none)":{backgroundColor:(t.vars||t).palette[e.color].main}},[`&.${m.focusVisible}`]:{backgroundColor:(t.vars||t).palette[e.color].dark}},{[`&.${m.disabled}`]:{color:(t.vars||t).palette.action.disabled}})},e.variant==="outlined"&&{border:t.vars?`1px solid rgba(${t.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${t.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${m.selected}`]:u({},e.color!=="standard"&&{color:(t.vars||t).palette[e.color].main,border:`1px solid ${t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / 0.5)`:z(t.palette[e.color].main,.5)}`,backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / ${t.vars.palette.action.activatedOpacity})`:z(t.palette[e.color].main,t.palette.action.activatedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:z(t.palette[e.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${m.focusVisible}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette[e.color].mainChannel} / calc(${t.vars.palette.action.activatedOpacity} + ${t.vars.palette.action.focusOpacity}))`:z(t.palette[e.color].main,t.palette.action.activatedOpacity+t.palette.action.focusOpacity)}},{[`&.${m.disabled}`]:{borderColor:(t.vars||t).palette.action.disabledBackground,color:(t.vars||t).palette.action.disabled}})})),ie=P("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(t,e)=>e.icon})(({theme:t,ownerState:e})=>u({fontSize:t.typography.pxToRem(20),margin:"0 -8px"},e.size==="small"&&{fontSize:t.typography.pxToRem(18)},e.size==="large"&&{fontSize:t.typography.pxToRem(22)})),ce=C.forwardRef(function(e,a){const o=B({props:e,name:"MuiPaginationItem"}),{className:i,color:r="standard",component:l,components:c={},disabled:n=!1,page:d,selected:h=!1,shape:b="circular",size:f="medium",slots:v={},type:g="page",variant:j="text"}=o,$=L(o,oe),x=u({},o,{color:r,disabled:n,selected:h,shape:b,size:f,type:g,variant:j}),A=gt(),y=se(x),R=(A.direction==="rtl"?{previous:v.next||c.next||J,next:v.previous||c.previous||Z,last:v.first||c.first||Q,first:v.last||c.last||q}:{previous:v.previous||c.previous||Z,next:v.next||c.next||J,first:v.first||c.first||Q,last:v.last||c.last||q})[g];return g==="start-ellipsis"||g==="end-ellipsis"?s.jsx(ne,{ref:a,ownerState:x,className:S(y.root,i),children:"…"}):s.jsxs(re,u({ref:a,ownerState:x,component:l,disabled:n,className:S(y.root,i)},$,{children:[g==="page"&&d,R?s.jsx(ie,{as:R,ownerState:x,className:y.icon}):null]}))}),le=ce,de=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],pe=t=>{const{classes:e,variant:a}=t;return I({root:["root",a],ul:["ul"]},Xt,e)},ue=P("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:a}=t;return[e.root,e[a.variant]]}})({}),ge=P("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(t,e)=>e.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function fe(t,e,a){return t==="page"?`${a?"":"Go to "}page ${e}`:`Go to ${t} page`}const ve=C.forwardRef(function(e,a){const o=B({props:e,name:"MuiPagination"}),{boundaryCount:i=1,className:r,color:l="standard",count:c=1,defaultPage:n=1,disabled:d=!1,getItemAriaLabel:h=fe,hideNextButton:b=!1,hidePrevButton:f=!1,renderItem:v=k=>s.jsx(le,u({},k)),shape:g="circular",showFirstButton:j=!1,showLastButton:$=!1,siblingCount:x=1,size:A="medium",variant:y="text"}=o,N=L(o,de),{items:R}=te(u({},o,{componentName:"Pagination"})),O=u({},o,{boundaryCount:i,color:l,count:c,defaultPage:n,disabled:d,getItemAriaLabel:h,hideNextButton:b,hidePrevButton:f,renderItem:v,shape:g,showFirstButton:j,showLastButton:$,siblingCount:x,size:A,variant:y}),w=pe(O);return s.jsx(ue,u({"aria-label":"pagination navigation",className:S(w.root,r),ownerState:O,ref:a},N,{children:s.jsx(ge,{className:w.ul,ownerState:O,children:R.map((k,p)=>s.jsx("li",{children:v(u({},k,{color:l,"aria-label":h(k.type,k.page,k.selected),shape:g,size:A,variant:y}))},p))})}))}),xe=ve,ye=Lt({createStyledComponent:P("div",{name:"MuiStack",slot:"Root",overridesResolver:(t,e)=>e.root}),useThemeProps:t=>B({props:t,name:"MuiStack"})}),me=ye,he="/api/",be=20,Ce=async t=>{const e=await fetch(he+t,{method:"GET"});if(!e.ok){const o=await e.json();throw new Error((o==null?void 0:o.message)||e.statusText)}return await e.json()},Pe={revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1};function $e(t){const e=C.useRef(1),a=C.useRef(1),{data:o,error:i,isLoading:r}=Ct(t,l=>Ce(l),Pe);return o!=null&&o.pagination&&(a.current!==o.pagination.total_pages&&(a.current=o.pagination.total_pages),e.current!==o.pagination.current_page&&(e.current=o.pagination.current_page)),{petListData:o==null?void 0:o.pets,error:i,isLoading:r,currentPage:e.current,totalPages:a.current,itemsPerPage:be}}const Re={textAlign:"center",marginBottom:"1rem",marginTop:"2rem"},je={textAlign:"center",marginBottom:"20px"};function Ae(t){return s.jsxs(s.Fragment,{children:[s.jsxs(U,{sx:Re,variant:"h2",children:["Adoptable ",t.petType,"s within 50 mile",t.petType.length>1?"s":"","."]}),s.jsxs(U,{sx:je,variant:"subtitle1",children:["Zip Code: ",t.zipCode]})]})}const ke={paddingTop:"2rem"};function Me(t){return s.jsx(me,{spacing:2,direction:"row",justifyContent:"center",alignItems:"center",children:s.jsx(xe,{count:t.totalPages,page:t.currentPage,color:"primary",showFirstButton:!0,onChange:t.onPageChange,disabled:t.isLoading,size:"large",sx:ke,variant:"outlined"})})}const Se="_imageContainer_pbgyy_1",Ne={imageContainer:Se},K={fontSize:"300px",color:"primary"},Le={marginBottom:"16px",textAlign:"center"},ze={marginBottom:"6px",textAlign:"center"};function Ie(t){var l;const{mutate:e}=Pt();async function a(){await e(`pets/${t.pet.id}`,t.pet)}const o=((l=t.pet.primary_photo_cropped)==null?void 0:l.small)??null,i=t.pet.distance?t.pet.distance.toFixed(1):"0";let r="";return i!=="0"&&(r=`${i} miles away`),s.jsx(W,{item:!0,children:s.jsx(ft,{component:vt,style:{textDecoration:"none"},to:`/pets/${t.pet.id}`,state:{fromSearch:!0},preventScrollReset:!1,children:s.jsx(Kt,{onClick:a,children:s.jsxs(Et,{sx:{maxWidth:"300px"},elevation:3,children:[o?s.jsx("div",{className:Ne.imageContainer,children:s.jsx("img",{src:o,alt:t.pet.name,loading:"lazy",decoding:"async"})}):t.pet.type=="Cat"?s.jsx(xt,{sx:K}):s.jsx(yt,{sx:K}),s.jsx(U,{variant:"h6",noWrap:!0,sx:ze,children:t.pet.name}),s.jsxs(U,{sx:Le,children:[t.pet.age," ",t.pet.gender,s.jsx("br",{}),r]})]})})})},t.pet.id)}function Te(t){const e=new Array(t);for(let a=0;a<e.length;a++)e[a]=s.jsx(W,{item:!0,children:s.jsx($t,{variant:"rectangular",animation:"wave",width:300,height:300})},"grid-item-key-"+a);return e}function Be(t){return s.jsx(W,{container:!0,spacing:2,justifyContent:"center",children:!t.petData||t.isLoading?Te(t.itemsPerPage):t.petData.map((e,a)=>s.jsx(Ie,{pet:e},"pet-id-"+a))})}function Oe(t){const{petListData:e,error:a,isLoading:o,currentPage:i,totalPages:r,itemsPerPage:l}=$e(t.searchQueryURL),c=t.searchParams.get("type"),n=t.searchParams.get("location");return a?s.jsxs(tt,{severity:"error",children:["Failed to retrieve ",c," data..."]}):s.jsxs(s.Fragment,{children:[s.jsx(Ae,{petType:c,zipCode:n}),s.jsx(Be,{petData:e,isLoading:o,itemsPerPage:l}),s.jsx(Me,{currentPage:i,totalPages:r,isLoading:o,onPageChange:t.onPageChange})]})}const X=new Map().set("dogs","dog").set("cats","cat");function Fe(){const{zipCode:t}=C.useContext(mt),e=ht(),[a,o]=bt(),i=e.petType??"";if(!X.has(i))return s.jsxs(tt,{severity:"error",children:[s.jsx(wt,{children:"Error"}),"Pet Type: ",i," not supported."]});const r=(h,b)=>{const f=new URLSearchParams(a);f.set("page",b.toString()),o(f)},l=a.get("location")??t,c=a.get("page")??"1",n=new URLSearchParams;n.append("type",X.get(i)),n.append("location",l),n.append("page",c);const d="pets?"+n.toString();return s.jsx(Oe,{searchParams:n,searchQueryURL:d,onPageChange:r})}export{Fe as default};
